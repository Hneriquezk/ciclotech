<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra Realizada</title>
    <link rel="stylesheet" href="../css/pago.css">
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Poppins&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <div class="lado-esquerdo">
            <a href="../html/contato.html">CONTATO</a>
            <a href="../html/home.php">HOME</a>
        </div>

        <div class="logo">
            <img src="../img/logo.png" alt="Ciclotech">
        </div>

        <div class="carrinho">
            <img src="../img/carrinho.png" alt="Carrinho">
        </div>
    </header>
    <br>
    <nav>
        <a href="#">Bicicletas/Quadros</a>
        <span>|</span>
        <a href="#">Capacetes</a>
        <span>|</span>
        <a href="#">Rodas</a>
        <span>|</span>
        <a href="#">Pneus/Câmaras</a>
        <span>|</span>
        <a href="#">Óculos</a>
        <span>|</span>
        <a href="#">Luvas</a>
        <span>|</span>
        <a href="#">Vestuário</a>
        <span>|</span>
        <a href="#">Kit Limpeza</a>
    </nav>
    <br><br>
    
    <main class="container">
        <div class="confirmation">
            <img src="../img/caminhao-removebg-preview.png" alt="Ícone de caminhão" class="icon-truck" /> <!-- Ajustado para a pasta img -->
            <h2><br>Pagamento efetuado.</h2>
            <p class="success">Seu pedido foi finalizado com sucesso!</p>
            <br><br>
            <a href="home.php" class="btn">Voltar para o início</a>
        </div>
    </main>
    
        <footer>
        <div class="footer-top">
            <span>Entregamos para o Brasil inteiro</span>
            <span>Desconto no pix: 10%</span>
            <span>SITE 100% SEGURO</span>
        </div>
        <div class="footer-main">
            <div class="footer-logo">
                <img src="../img/logo.png" alt="Ciclotech">
                <p class="text">A loja mais especializada em itens de ciclismo geral no Brasil.</p>
            </div>
            <div class="footer-section">
                <h3 class="text">Informações</h3>
                <ul>
                    <li><a href="index.html">Cilcotech</a></li>
                    <li><a href="#">Política De Privacidade</a></li>
                    <li><a href="#">Trocas e Devoluções</a></li>
                </ul>
            </div>
            <div class="footer-section footer-contact">
                <h3 class="text">Atendimento</h3>
                <p class="text">Segunda a Sexta<br>10:00 ás 16:00</p>
                <br>
                <h3 class="text">Contato</h3>
                <p class="text">(12)1234-5678</p>
                <p class="text">(12)1234-5678</p>
                <h3 class="text">Redes Sociais</h3>
                <div class="footer-social">
                    <img src="../img/instagram.png" alt="Instagram">
                    <img src="../img/facebook.png" alt="Facebook">
                </div>
            </div>
            <div class="footer-section footer-payment">
                <h3 class="text">Formas de Pagamento</h3>
                <div>
                    <img src="../img/visa.jpg" alt="Visa">
                    <img src="../img/mastercard.png" alt="Mastercard">
                    <img src="../img/hipercard.png" alt="Hipercard">
                    <img src="../img/elo.png" alt="Elo">
                    <img src="../img/boleto.png" alt="Boleto">
                    <img src="../img/pix.png" alt="Pix">
                    <img src="../img/paypal.png" alt="Paypal">
                </div>
            </div>
        </div>
    </footer>

    <script>

        const stepCarrinho = document.getElementById('stepCarrinho');

        stepCarrinho.addEventListener('click', function (e) {
            e.preventDefault();
            const painelCarrinho = document.getElementById('painelCarrinho');
            painelCarrinho.classList.add('aberto');
        });

        const carrinhoButton = document.getElementById('carrinhoButton');
        const painelCarrinho = document.getElementById('painelCarrinho');
        const fecharCarrinho = document.getElementById('fecharCarrinho');
        const listaProdutosCarrinho = document.getElementById('listaProdutosCarrinho');
        const totalCarrinho = document.getElementById('totalCarrinho');
        const finalizarCompraButton = document.getElementById('finalizarCompra');


        let carrinho = JSON.parse(localStorage.getItem('carrinhoTenis') || '{}');

        function salvarCarrinho() {
            localStorage.setItem('carrinhoTenis', JSON.stringify(carrinho));
        }

        function formatarPreco(valor) {
            return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        function atualizarTotal() {
            const total = Object.values(carrinho).reduce((acc, item) => acc + item.preco * item.quantidade, 0);
            totalCarrinho.textContent = 'Total: ' + formatarPreco(total);
        }

        function criarItemCarrinhoElement(item) {
            const div = document.createElement('div');
            div.className = 'item-carrinho';
            div.innerHTML = `
                <img src="${item.imagem}" alt="Tênis ${item.nome}">
                <div class="item-info">
                    <h4>${item.nome}</h4>
                    <span>${formatarPreco(item.preco)}</span>
                </div>
                <div class="item-controles">
                    <input type="number" min="1" value="${item.quantidade}" data-id="${item.id}" aria-label="Quantidade do ${item.nome}">
                    <button aria-label="Remover ${item.nome}" data-id="${item.id}">&times;</button>
                </div>
            `;
            return div;
        }

        function renderizarCarrinho() {
            listaProdutosCarrinho.innerHTML = '';
            const ids = Object.keys(carrinho);
            if (ids.length === 0) {
                listaProdutosCarrinho.innerHTML = '<p style="text-align:center;color:#777;">Seu carrinho está vazio.</p>';
                totalCarrinho.textContent = 'Total: R$ 0,00';
                finalizarCompraButton.style.display = 'none';
                return;
            }
            ids.forEach(id => {
                const item = carrinho[id];
                listaProdutosCarrinho.appendChild(criarItemCarrinhoElement(item));
            });
            atualizarTotal();
            finalizarCompraButton.style.display = 'block';
        }

        function adicionarAoCarrinho(id) {
            const produto = produtos.find(p => p.id === id);
            if (!produto) return;
            if (carrinho[id]) {
                carrinho[id].quantidade++;
            } else {
                carrinho[id] = { ...produto, quantidade: 1 };
            }
            salvarCarrinho();
            renderizarCarrinho();
            abrirCarrinho();
        }

        function alterarQuantidade(id, quantidade) {
            if (carrinho[id]) {
                quantidade = parseInt(quantidade);
                if (quantidade <= 0) {
                    deletarItem(id);
                } else {
                    carrinho[id].quantidade = quantidade;
                }
                salvarCarrinho();
                renderizarCarrinho();
            }
        }

        function deletarItem(id) {
            delete carrinho[id];
            salvarCarrinho();
            renderizarCarrinho();
        }

        function abrirCarrinho() {
            painelCarrinho.classList.add('aberto');
        }

        function fecharPainelCarrinho() {
            painelCarrinho.classList.remove('aberto');
            finalizarCompraButton.style.display = 'none'; // Ocultar botão ao fechar o carrinho
        }


        carrinhoButton.addEventListener('click', abrirCarrinho);
        fecharCarrinho.addEventListener('click', fecharPainelCarrinho);


        finalizarCompraButton.addEventListener('click', () => {
            window.open('identificaçao.html', '_blank');
        });

        listaProdutosCarrinho.addEventListener('input', (e) => {
            if (e.target.tagName === 'INPUT' && e.target.type === 'number') {
                const id = parseInt(e.target.dataset.id);
                alterarQuantidade(id, e.target.value);
            }
        });

        listaProdutosCarrinho.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const id = parseInt(e.target.dataset.id);
                deletarItem(id);
            }
        });
        renderizarCarrinho();
    </script>


</body>

</html>